// ==UserScript==
// @name		Karlizator
// @namespace	http://tampermonkey.net/
// @version		1.1-SNAPSHOT
// @description	Translates webpages from hungarian to Karl
// @author		Bence DEMETER
// @match		http*://*/*
// @grant		none
// ==/UserScript==

const KARLIZATOR_JSONP_URL="https://drive.google.com/uc?export=download&id=11HM-75X2IPG_8by5FvR6e0MO674Msikt";
!function(){"use strict";if(window.karlization=function(e,t){let o=(e,t,o)=>{e.nodeType===Node.TEXT_NODE?t(e):e.nodeType===Node.ELEMENT_NODE&&"SCRIPT"!==e.nodeName&&o(e,t)},n=(e,t)=>{for(let d=0,r=e.childNodes.length;d<r;d++){let r=e.childNodes[d];o(r,t,n)}};n(document.getElementsByTagName("body")[0],o=>{let n=o.parentNode;n.insertBefore(document.createTextNode((t=>{for(let o of e){let e=new RegExp(o.key+'([ W\n.,:;?!<"”)]+)',"gi");t=t.replace(e,o.value+"$1").replace(new RegExp(o.key+"$"),o.value)}return t})((e=>{for(let o of t){let t=new RegExp(o.key,"g"),n=new RegExp(o.key.substring(0,1).toUpperCase()+o.key.substring(1),"g"),d=o.value.substring(0,1).toUpperCase()+o.value.substring(1);e=e.replace(t,o.value).replace(n,d)}return e})(o.data))),o),n.removeChild(o)})},window===window.top){let e=document.createElement("button");e.innerText="KARLIZATE!",e.setAttribute("style","position:fixed;top:5px;left:5px;z-index:999999;padding:5px;background-color:#333333;color:#F0F0F0;border:3px solid #F80;font-weight:bold"),e.addEventListener("click",function(){let e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src",KARLIZATOR_JSONP_URL),document.body.appendChild(e)},!0),document.getElementsByTagName("body")[0].appendChild(e)}}();